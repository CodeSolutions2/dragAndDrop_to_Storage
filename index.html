<!DOCTYPE html>
<html>
<head></head>
<body>

<h1>Timeseries data webapp</h1>
<ol type="A">
	<li>Select a timeseries data source.</li>
		<ul>
			<li>Example 0 - Weather prediction: Enter LOCATION (ie: City, Country)</li>
		</ul>
	<li>View fetched data.</li>
  <li>Select a model to perform timeseries prediction.</li>
  <li>Predict future time points, evaluate error.</li>
</ol>

<input id="LOCATION" type="text" value="" placeholder="LOCATION" rows="10" cols="100" style="display:block; text-align: left; width: 600px;">

<button id="view_fetched_data" onclick="view_fetched_data()">View Fetched Data</button>
  
<br>
<!-- Drop down menu -->
<!-- LSTM, Forecasting, Transformer_based -->
<label for="select_model_type">Select a desired model:</label>
<select name="model_type" id="model_type" style="display:block">
  <option value="LSTM">LSTM</option>
  <option value="Forecasting">Forecasting</option>
  <option value="Transformer_based">Transformer_based</option>
</select>
  
<button id="predict" onclick="predict()">Predict</button>




<script>
	
// -----------------------------------------------
	
window.addEventListener('beforeunload', function() {
    window.location.href = window.location.href + '?nocache=' + new Date().getTime();
});
  
// -----------------------------------------------

async function view_fetched_data() {

	
	
}

	
async function get_lat_long() {

	// https://maps.googleapis.com/maps/api/geocode/json?address=${address}&key=${GCP_API_KEY}
	// OR
	// https://nominatim.org/release-docs/latest/api/Search/
	var url = `https://nominatim.openstreetmap.org/search?q=${document.getElementById('LOCATION').value}&format=json`;
	
	var headers = {"Content-Type": "application/json"}
	var options = {method : 'GET', headers: headers,  mode: 'cors'};
		
		// ------------------------------------------

	
		
		await fetch(url, options)
			.then(res => res.json())
			.then(res => { 
				//let output = JSON.parse(JSON.stringify(res));
				console.log('res: ', res);
			})
			.catch(error => { document.getElementById('error').innerHTML = error; });

}
  
// -----------------------------------------------

async function get_forecast_temperature_data() {

	// https://nominatim.openstreetmap.org/search?q=Lyon&format=json
	var location_latitude = "45.7578137";
	var location_longitude = "4.8320114";

	
    // https://open-meteo.com/en/docs

  var url = 'https://open-meteo.com/v1/forecast';
	  
		var headers = {"Content-Type": "application/json"}
	
		var data = {"latitude": Number(location_latitude),
			    "longitude": Number(location_longitude), 
			    "forecast_days": 1, 
			    "forecast_hours": 5
		};
		
		// --------------------
		
		var options = {method : 'POST', headers: headers, body : JSON.stringify(data)};
		
		// ------------------------------------------
		
		await fetch(url, options)
			.then(res => res.json())
			.then(res => { 
				let output = JSON.parse(JSON.stringify(res));
				console.log('output: ', output);
			})
			.catch(error => { document.getElementById('error').innerHTML = error; });

  
  
}

// -----------------------------------------------




</script>

  
</body>
</html>
