<!DOCTYPE html>
<html>
<head></head>
<body>

<button id="plot_data_bar_graph" onclick="plot_data_bar_graph()" style="display:none;">plot_data_bar_graph</button>
<button id="plot_line_graph" onclick="plot_line_graph()" style="display:none;">plot_line_graph</button>

<div id="data_display" style="display:block; text-align: left; width: 600px;"></div>

<script src='https://d3js.org/d3.v7.min.js'></script>


<script>
	


  
async function plot_data_bar_graph() {


  const dataArray = [30, 50, 80, 120, 200];
  
const svgElement = document.createElement('svg');
	
	// Verify the contents of the frequency data
	const svg = d3.select("body").append(svgElement).attr("width", 400).attr("height", 200);
	
	// Create a histogram generator
	var histogram = d3.histogram()
		.domain([0, analyser.frequencyBinCount])
		.thresholds(d3.range(0, analyser.maxDecibels, analyser.minDecibels));

	// Generate the histogram bins
	var bins = histogram(dataArray);
	
	// Create the bars for the histogram
	svg.selectAll("rect")
	    .data(bins)
	    .enter()
	    .append("rect")
	    .attr("x", function(d,i) { console('d.x0: ', d.x0); return i; })
	    .attr("y", function(d) { return d; })
	    .attr("width", function(d) { return d.x1 - d.x0 - 1; })
	    .attr("height", function(d) { return d.length * 5; })
	    .attr("fill", "steelblue");

	document.getElementById('data_display').appendChild(svgElement);
}



async function min_max_of_array(arr) {
  const arr_sort = arr.sort();
  return [arr_sort.at(0), arr_sort.at(arr.length-1)];
}

  
async function plot_line_graph() {

  const dataArray = [30, 50, 80, 120, 200];

  const [min_val, max_val] = await min_max_of_array(dataArray);

  var svgElement = document.createElement('svg');
	
  const scale = d3.scaleLinear().domain([0, dataArray.length]).range([min_val, max_val]);
  
	const svg = d3.select('body').append(svgElement).attr('width', 400).attr('height', 200);
	
	// Plot data on chart, Add bars to the chart
	svg.selectAll('rect')
		.data(dataArray)
		.enter()
		.append('rect').attr('width', d => scale(d)).attr('height', 20).attr('y', (d,i) => d).attr('x', (d,i) => i);
	
	document.getElementById('data_display').appendChild(svgElement);
}



</script>

  
</body>
</html>
