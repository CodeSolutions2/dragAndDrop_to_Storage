<!DOCTYPE html>
<html>
<head></head>
<body>

<button id="plot_data_bar_graph" onclick="plot_data_bar_graph()" style="display:block;">plot_data_bar_graph</button>
<button id="plot_line_graph" onclick="plot_line_graph()" style="display:block;">plot_line_graph</button>

<div id="data_display" style="display:block; text-align: left; width: 600px;"></div>

<svg class="chart" style="display:block; margin:auto;"></svg>
	

<script src='https://d3js.org/d3.v7.min.js'></script>


<script>
	


  
async function plot_data_bar_graph() {
	
	const dataArray = [30, 50, 80, 120, 200];

	// ---------------------------------------------------

	// Obtain information about data
	const [min_val, max_val] = await min_max_of_array(dataArray);
	console.log("min_val: ", min_val);
	console.log("max_val: ", max_val);
	
	// ---------------------------------------------------
	
	// const svgElement = document.createElement('svg');
	
	// Verify the contents of the frequency data
	const svg = d3.select(".chart").append("svg").attr("width", 400).attr("height", 200);

	// Create a histogram generator
	var histogram = d3.histogram().domain([0, dataArray.length]).thresholds(d3.range(min_val, max_val));

	// Generate the histogram bins
	var bins = histogram(dataArray);
	
	// Create the bars for the histogram
	svg.selectAll("rect")
	    .data(bins)
	    .enter()
	//     .append("rect")
	//     .attr("x", function(d,i) { console('d.x0: ', d.x0); return i; })
	//     .attr("y", function(d) { return d; })
	//     .attr("width", function(d) { return d.x1 - d.x0 - 1; })
	//     .attr("height", function(d) { return d.length * 5; })
	//     .attr("fill", "steelblue");

	// document.getElementById('data_display').appendChild(svgElement);
}



async function min_max_of_array(arr) {
  const arr_sort = arr.sort();
  return [arr_sort.at(0), arr_sort.at(arr.length-1)];
}

  
async function plot_line_graph() {
	
	const dataArray = [30, 50, 80, 120, 200];

	// ---------------------------------------------------
	
	const [min_val, max_val] = await min_max_of_array(dataArray);
	console.log("min_val: ", min_val);
	console.log("max_val: ", max_val);

	// ---------------------------------------------------
	
	// var svgElement = document.createElement('svg');
	// svgElement.setAttribute("class", "chart");
	// console.log("svgElement: ", svgElement);

	const w = 400;
	const h = 400;
	
	const scale = d3.scaleLinear().domain([0, dataArray.length]).range([min_val, max_val]);
	console.log("scale: ", scale);
	
	const svg = d3.select('svg');
	//.append("svg").attr('width', w).attr('height', h);
	console.log("svg: ", svg);
	
	// Plot data on chart, Add bars to the chart
	const bar_width = Math.floor((w/dataArray.length)/2);
	console.log("bar_width: ", bar_width);

	const buffer = Math.floor(0.1*bar_width);   // 10 percent of bar_width
	
	svg.selectAll('rect')
		.data(dataArray)
		.enter()
		.append('rect')
		.attr('width', bar_width)	// bar_width
		.attr('height', d => d)		// bar_height
		.attr('y', (d,i) => 0)		// the (y-location) of each bar
		.attr('x', (d,i) => i * (bar_width + buffer))	// the (x-location) of each bar
		.attr("fill", "steelblue");
	
	// document.getElementById('data_display').appendChild(svgElement);
}



</script>

  
</body>
</html>
