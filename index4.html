<!DOCTYPE html>
<html>
<head></head>
    
<body>

<input id="n" type="text" value="" placeholder="n" rows="10" cols="100" style="display:block; text-align: left; width: 600px;">
<br>
<input id="k" type="text" value="" placeholder="k" rows="10" cols="100" style="display:block; text-align: left; width: 600px;">

<button id="run_it" onclick="run_it()">Run Selection</button>
    
</body>


<script>

// window.onload = async (event) => { await run_it(); };


async function run_it() {
    var n = document.getElementById("n").value;   // 5;
    var k = document.getElementById("k").value;   // 2;
    
    // var max_num = await getMaxLessThanK(n, k);
    // console.log('max_num:', max_num);
    
    var out_max = 0;
    var out = 0;
    
    for (let i=1; i < n; i++) {
        for (let j=0; j < (n-i); j++) {
            out = i & (i+1)+j;
            if (out < k && out > out_max) {
                out_max = out;
            }
            console.log('out_max:', out_max);
            console.log('out:', out);
        }
    }
    
    console.log('out_max:', out_max);
}





    
async function getMaxLessThanK(n, k) {
    
    var decimal_arr = [];
    for (let i=1; i < n; i++) {
        let a = Array.from({length: n-i}, (_,index) => i);
        let b = Array.from({length: n-i}, (_,index) => index+(i+1));
        let out = a.map((val, ind) => { return val & b.at(ind); }).sort().pop();
        if (out < k) {
            decimal_arr.push(out);
        }
    }
    return decimal_arr.sort().pop();
}


async function getMaxLessThanK1(n, k) {
    
    var out_max = 0;
    var out = 0;
    
    for (let i=1; i < n; i++) {
        for (let j=0; j < (n-i); j++) {
            out = i & (i+1)+j;
            if (out < k && out > out_max) {
                out_max = out;
            }
        }
    }
    return out_max;
}

    
</script>
  
</html>
