<!DOCTYPE html>
<html>
<head></head>
    
<body>

<input type="text" name="" id="url" value="" placeholder="url" style="display:block;">
  
<button id="run_fetch_script" onclick="run_fetch_script()" style="display:block">run_fetch_script</button>
  
<script>

// -------------------------------------------------
  
function run_fetch_script() {

	// https://cdn.jsdelivr.net/npm/library_to_run_github_actions@1.0.1/index.min.js
	loadScript()
		.then( data  => { console.log("Script loaded successfully", data); })
		.catch( err => { console.error(err); });

	// Test a function in the imported script
	var out = async () => { await rand_perm([2, 4, 5]); }
	console.log('out: ', out);
	
}

// -------------------------------------------------

const loadScript = () => {
	
	const FILE_URL = document.getElementById('url').value;
	console.log("FILE_URL: ", FILE_URL);

	const type = "text/javascript";
	// const type = "module";
	
	return new Promise((resolve, reject) => {
        try {
            const scriptElement = document.createElement("script");
            scriptElement.type = type;
            scriptElement.async = true;
            scriptElement.src = FILE_URL;
            scriptElement.crossorigin = "*";
            scriptElement.redirect = "follow";
            scriptElement.mode = 'cors';

            scriptElement.addEventListener("load", (ev) => {
                resolve({ status: true });
            });

            scriptElement.addEventListener("error", (ev) => {
                reject({
                    status: false,
                    message: `Failed to load the script ${FILE_URL}`
                });
            });

            document.body.appendChild(scriptElement);
        } catch (error) {
            reject(error);
        }
    });
};

// -------------------------------------------------
	
</script>
</body>
</html>
